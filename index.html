<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocene</title>
    <!-- Dodana favicon ikona -->
    <link rel="icon" href="Lg.png" type="image/png">
    <style>
        body {
            font-family: 'Aptos Narrow', sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            text-align: center;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .kratica {
            font-weight: bold;
        }
        .pisna-ocena, .ustna-ocena, .koncna-ocena, .izdelek-ocena, .zakljucna-ocena {
            font-weight: bold;
            cursor: pointer;
        }
        .pisna-ocena:hover, .ustna-ocena:hover, .koncna-ocena:hover, .izdelek-ocena:hover, .zakljucna-ocena:hover {
            text-decoration: underline;
        }
        .pisna-ocena { color: red; }
        .ustna-ocena { color: blue; }
        .koncna-ocena { color: green; }
        .izdelek-ocena { color: purple; }
        .zakljucna-ocena {
            color: black;
            font-size: 1.2em;
        }
        .stara-ocena {
            color: grey;
            font-size: 0.8em;
        }
        .legend {
            margin-top: 20px;
        }
        .legend span {
            display: inline-block;
            margin-right: 10px;
            font-weight: bold;
        }
        .legend .pisna-ocena { color: red; }
        .legend .ustna-ocena { color: blue; }
        .legend .koncna-ocena { color: green; }
        .legend .izdelek-ocena { color: purple; }
        .legend .zakljucna-ocena { color: black; }
        .action-buttons {
            margin-top: 20px;
        }
        select, button {
            font-family: 'Aptos Narrow', sans-serif;
            padding: 5px 10px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>OCENE</h1>
    <table id="oceneTabela">
        <thead>
            <tr>
                <th>Predmet</th>
                <th>Prvo ocenjevalno obdobje</th>
                <th>Drogo ocenjevalno obdobje</th>
                <th>Konec</th>
            </tr>
        </thead>
        <tbody>
            <!-- Predmeti bodo tukaj dinamično dodani preko JavaScript-a -->
        </tbody>
    </table>

    <div class="legend">
        <span class="pisna-ocena">PISNA OCENA</span>
        <span class="ustna-ocena">USTNA OCENA</span>
        <span class="koncna-ocena">KONČNA OCENA</span>
        <span class="izdelek-ocena">IZDELEK</span>
        <span class="zakljucna-ocena">ZAKLJUČNA OCENA</span>
        <div class="action-buttons">
            <label for="tipOcene">Izberite tip ocene:</label>
            <select id="tipOcene">
                <option value="pisna">Pisna ocena</option>
                <option value="ustna">Ustna ocena</option>
                <option value="koncna">Končna ocena</option>
                <option value="izdelek">Izdelek</option>
                <option value="zakljucna">Zaključna ocena</option>
            </select>
        </div>
    </div>

    <script>
        const predmeti = [
            { kratica: "SLO", naziv: "Slovenščina" },
            { kratica: "MAT", naziv: "Matematika" },
            { kratica: "ANJ", naziv: "Angleščina" },
            { kratica: "UME", naziv: "Umetnost" },
            { kratica: "ZGO", naziv: "Zgodovina" },
            { kratica: "GEO", naziv: "Geografija" },
            { kratica: "FIZ", naziv: "Fizika" },
            { kratica: "KEM", naziv: "Kemija" },
            { kratica: "ŠVZ", naziv: "Športna vzgoja" },
            { kratica: "GOB", naziv: "Grafično oblikovanje" },
            { kratica: "GMP", naziv: "Grafični in medijski procesi" },
            { kratica: "IKT", naziv: "Informacijsko komunikacijska tehnologija" },
            { kratica: "IPM", naziv: "Izbrana poglavja matematike" },
            { kratica: "NEJ", naziv: "Nemščina" },
        ];

        const tabela = document.getElementById("oceneTabela").getElementsByTagName('tbody')[0];
        const tipOceneSelect = document.getElementById("tipOcene");

        function nalaganjeOcen() {
            const ocene = JSON.parse(localStorage.getItem('ocene')) || {};
            predmeti.forEach(predmet => {
                let row = tabela.insertRow();
                row.innerHTML = `
                    <td>
                        <span class="kratica">${predmet.kratica}</span><br>
                        ${predmet.naziv}
                    </td>
                    <td class="editable" data-predmet="${predmet.kratica}" data-stolpec="1">${ocene[predmet.kratica]?.[1] || ''}</td>
                    <td class="editable" data-predmet="${predmet.kratica}" data-stolpec="2">${ocene[predmet.kratica]?.[2] || ''}</td>
                    <td class="editable" data-predmet="${predmet.kratica}" data-stolpec="3">${ocene[predmet.kratica]?.[3] || ''}</td>
                `;
            });
        }

        function shraniOcene() {
            const ocene = {};
            const rows = tabela.rows;
            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].cells;
                const predmet = cells[0].innerText.split(' ')[0];
                ocene[predmet] = {
                    1: cells[1].innerHTML.trim(),
                    2: cells[2].innerHTML.trim(),
                    3: cells[3].innerHTML.trim()
                };
            }
            localStorage.setItem('ocene', JSON.stringify(ocene));
        }

        tabela.addEventListener("click", (event) => {
            const target = event.target;

            if (
                target.classList.contains("pisna-ocena") ||
                target.classList.contains("ustna-ocena") ||
                target.classList.contains("koncna-ocena") ||
                target.classList.contains("izdelek-ocena") ||
                target.classList.contains("zakljucna-ocena")
            ) {
                const trenutnaOcena = target.textContent;
                const akcija = prompt(`OCENA: ${trenutnaOcena}\nKAJ ŽELITE NAREDITI?\n1. IZBRISATI\n2. UREDITI OCENO`);
                
                if (akcija === "1") {
                    target.remove();
                } else if (akcija === "2") {
                    const novaOcena = prompt("VNESITE NOVO OCENO:");
                    if (novaOcena) {
                        target.innerHTML = `<span class="stara-ocena">${trenutnaOcena}</span> <span class="${target.classList[0]}">${novaOcena}</span>`;
                    }
                }
                shraniOcene();
                return;
            }

            if (target.classList.contains("editable")) {
                const tipOcene = tipOceneSelect.value;
                if (!tipOcene) {
                    alert("Izberite tip ocene najprej!");
                    return;
                }

                const novaOcena = prompt("Vnesite oceno:");
                if (novaOcena) {
                    const potrditev = confirm("ALI ŽELITE VPISATI OCENO?");
                    if (potrditev) {
                        const trenutnaVsebina = target.innerHTML.trim();
                        const novaVsebina = trenutnaVsebina
                            ? `${trenutnaVsebina} <span class="${tipOcene}-ocena">${novaOcena}</span>`
                            : `<span class="${tipOcene}-ocena">${novaOcena}</span>`;
                        target.innerHTML = novaVsebina;
                        shraniOcene();
                    }
                }
            }
        });

        nalaganjeOcen();
    </script>
</body>
</html>
